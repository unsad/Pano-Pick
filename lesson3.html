<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="bower_components/three.js/three.js"></script>
</head>
<body onload="init()">
    <canvas id="mainCanvas" width="400px" height="300px"></canvas>
</body>
<script>
    function init() {
        // 创建基础场景设施
          let renderer = new THREE.WebGLRenderer({
            canvas: document.getElementById('mainCanvas')
        }),
            scene = new THREE.Scene(),
            camera = new THREE.PerspectiveCamera(45, 4 / 3, 1, 1000),
        loader = new THREE.TextureLoader();

        // 创建贴图对象
        let light = new THREE.SpotLight(0xffffff, 1, 100, Math.PI / 6, 25);
        loader.load('imgs/plane.jpg', function(tex) {
            let plane = new THREE.Mesh(new THREE.PlaneGeometry(50, 50, 20, 20),
                new THREE.MeshLambertMaterial({
                    color: 0xffffff,
                    map: tex
                }));
            plane.position.set(0, -7, 0);
            plane.rotation.x = -Math.PI / 2;
            plane.receiveShadow = true;
            scene.add(plane);
            renderer.render(scene, camera);
        });
        loader.load('imgs/Rubber.jpg', function(tex) {
            let cube = new THREE.Mesh(new THREE.BoxGeometry(10, 10, 10),
                new THREE.MeshLambertMaterial({
                    map: tex
                }));
            cube.castShadow = true;
            scene.add(cube);
            renderer.render(scene, camera);
            light.target = cube;
        });
        loader.load('imgs/Rubber.jpg', function(tex) {
            let mater = new THREE.MeshLambertMaterial({
                    map: tex
                }),
                torus= [];
            for (let i = 0;i < 4;i++) {
                torus[i] = new THREE.Mesh(new THREE.TorusGeometry(2, 1, 10 ,10), mater);
                torus[i].castShadow = true;
                scene.add(torus[i]);
            }
            torus[0].position.set(5, -5, 5);
            torus[1].position.set(5, -5, -5);
            torus[2].position.set(-5, -5, 5);
            torus[3].position.set(-5, -5, -5);
            renderer.render(scene, camera);
        });
        // 相机定位
        camera.position.set(20, 20, 20);
        camera.lookAt({
            x: 0,
            y: 0,
            z: 0
        });

        // 阴影配置

        renderer.shadowMap.enabled = true;
        renderer.shadowMapSoft = true;
        light.position.set(-30, 30, 30);
        light.castShadow = true;
        light.intensity = 5;
        light.shadow.camera.near = 2;
        light.shadow.camera.far = 20;
        light.shadow.camera.fov = 40;
        light.shadow.mapSize.width = 1024;
        light.shadow.mapSize.height = 1024;

        // 渲染
        scene.add(light);
        scene.add(camera);
        renderer.setClearColor(0xdddddd);
        renderer.render(scene, camera);
    }
</script>
</html>